<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrendTracker - Stock Screening & Analysis</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand" onclick="showPage('home')">
                <i class="fas fa-chart-line"></i>
                <span>TrendTracker</span>
            </div>
            
            <div class="nav-menu">
                <a href="#" onclick="showPage('home')">Home</a>
                <a href="#" onclick="showPage('screens')">Screens</a>
                <a href="#" onclick="showPage('portfolio')">Portfolio</a>
                <a href="#" onclick="showPage('news')">News</a>
                <a href="#" onclick="showPage('tools')">Tools</a>
                <a href="#" onclick="showPage('about')">About</a>
            </div>
        </div>
    </nav>

    <!-- Homepage -->
    <div id="homepage" class="page active">
        <div class="hero-section">
            <div class="container">
                <h1>Stock Analysis Made Simple</h1>
                <p>Search, analyze, and screen stocks with powerful financial data</p>
                
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="company-search" placeholder="Search for a company..." autocomplete="off">
                        <div id="search-dropdown" class="search-dropdown"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="features-section">
                <h2 class="text-center">Powerful Stock Analysis Tools</h2>
                <div class="features-grid">
                    <div class="feature-card" onclick="showPage('screens')">
                        <i class="fas fa-filter"></i>
                        <h3>Stock Screener</h3>
                        <p>Filter stocks based on financial ratios and custom queries</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-chart-bar"></i>
                        <h3>Financial Analysis</h3>
                        <p>Comprehensive P&L, Balance Sheet, and Cash Flow analysis</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-robot"></i>
                        <h3>AI Assistant</h3>
                        <p>Get instant answers to your financial analysis questions</p>
                    </div>
                    <div class="feature-card" onclick="showPage('portfolio')">
                        <i class="fas fa-briefcase"></i>
                        <h3>Portfolio Tracker</h3>
                        <p>Track and analyze your investment portfolio performance</p>
                    </div>
                    <div class="feature-card" onclick="showPage('news')">
                        <i class="fas fa-newspaper"></i>
                        <h3>Market News</h3>
                        <p>Stay updated with latest financial news and market insights</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Company Page -->
    <div id="company-page" class="page">
        <div class="container">
            <div class="company-header">
                <button class="back-btn" onclick="showPage('home')">
                    <i class="fas fa-arrow-left"></i> Back to Search
                </button>
                
                <div class="company-info">
                    <h1 id="company-name">Company Name</h1>
                    <div class="company-meta">
                        <span id="company-ticker">TICKER</span>
                        <span class="price" id="company-price">₹0.00</span>
                        <span class="change" id="company-change">0.00%</span>
                    </div>
                </div>
            </div>

            <!-- Key Ratios -->
            <div class="ratios-section">
                <h3>Key Ratios</h3>
                <div class="ratios-grid">
                    <div class="ratio-card">
                        <h4>Market Cap</h4>
                        <p id="market-cap">₹0 Cr</p>
                    </div>
                    <div class="ratio-card">
                        <h4>P/E Ratio</h4>
                        <p id="pe-ratio">0.0</p>
                    </div>
                    <div class="ratio-card">
                        <h4>ROE</h4>
                        <p id="roe">0.0%</p>
                    </div>
                    <div class="ratio-card">
                        <h4>Debt/Equity</h4>
                        <p id="debt-equity">0.0</p>
                    </div>
                    <div class="ratio-card">
                        <h4>Revenue</h4>
                        <p id="revenue">₹0 Cr</p>
                    </div>
                    <div class="ratio-card">
                        <h4>Net Profit</h4>
                        <p id="net-profit">₹0 Cr</p>
                    </div>
                </div>
            </div>

            <!-- Price Chart Section -->
            <div class="chart-section">
                <h3>Price Chart</h3>
                <div class="chart-controls">
                    <button class="chart-btn active" onclick="loadChart('1M')">1M</button>
                    <button class="chart-btn" onclick="loadChart('3M')">3M</button>
                    <button class="chart-btn" onclick="loadChart('6M')">6M</button>
                    <button class="chart-btn" onclick="loadChart('1Y')">1Y</button>
                    <button class="chart-btn" onclick="loadChart('5Y')">5Y</button>
                </div>
                <div class="chart-container">
                    <canvas id="price-chart"></canvas>
                </div>
            </div>

            <!-- Financial Ratios Chart -->
            <div class="chart-section">
                <h3>Financial Ratios Trend</h3>
                <div class="chart-container">
                    <canvas id="ratios-chart"></canvas>
                </div>
            </div>

            <!-- Peer Comparison -->
            <div class="peer-comparison">
                <h3>Peer Comparison</h3>
                <div class="peer-table-container">
                    <table class="peer-table">
                        <thead>
                            <tr>
                                <th>Company</th>
                                <th>Market Cap</th>
                                <th>P/E</th>
                                <th>ROE</th>
                                <th>Revenue Growth</th>
                                <th>Debt/Equity</th>
                            </tr>
                        </thead>
                        <tbody id="peer-comparison-data">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Financial Tables -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('profit-loss')">Profit & Loss</button>
                <button class="tab" onclick="showTab('balance-sheet')">Balance Sheet</button>
                <button class="tab" onclick="showTab('cash-flow')">Cash Flow</button>
            </div>

            <div id="profit-loss-tab" class="tab-content active">
                <div class="financial-table-container">
                    <table class="financial-table">
                        <thead>
                            <tr>
                                <th>Particulars</th>
                                <th>2024</th>
                                <th>2023</th>
                                <th>2022</th>
                                <th>2021</th>
                                <th>2020</th>
                            </tr>
                        </thead>
                        <tbody id="profit-loss-data">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="balance-sheet-tab" class="tab-content">
                <div class="financial-table-container">
                    <table class="financial-table">
                        <thead>
                            <tr>
                                <th>Particulars</th>
                                <th>2024</th>
                                <th>2023</th>
                                <th>2022</th>
                                <th>2021</th>
                                <th>2020</th>
                            </tr>
                        </thead>
                        <tbody id="balance-sheet-data">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="cash-flow-tab" class="tab-content">
                <div class="financial-table-container">
                    <table class="financial-table">
                        <thead>
                            <tr>
                                <th>Particulars</th>
                                <th>2024</th>
                                <th>2023</th>
                                <th>2022</th>
                                <th>2021</th>
                                <th>2020</th>
                            </tr>
                        </thead>
                        <tbody id="cash-flow-data">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Screens Page -->
    <div id="screens-page" class="page">
        <div class="container">
            <div class="screens-header">
                <button class="back-btn" onclick="showPage('home')">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </button>
                <h1>Stock Screener</h1>
                <p>Filter and analyze stocks using powerful screening tools</p>
            </div>

            <div class="screens-content">
                <div class="screens-sidebar">
                    <h3>Pre-made Screens</h3>
                    <div class="screen-list">
                        <div class="screen-item" onclick="applyPresetFilter('high-growth')">
                            <i class="fas fa-rocket"></i>
                            <span>High Growth Stocks</span>
                        </div>
                        <div class="screen-item" onclick="applyPresetFilter('low-pe')">
                            <i class="fas fa-chart-line"></i>
                            <span>Low PE Stocks</span>
                        </div>
                        <div class="screen-item" onclick="applyPresetFilter('high-dividend')">
                            <i class="fas fa-coins"></i>
                            <span>High Dividend Stocks</span>
                        </div>
                        <div class="screen-item" onclick="applyPresetFilter('large-cap')">
                            <i class="fas fa-building"></i>
                            <span>Large Cap Stocks</span>
                        </div>
                        <div class="screen-item" onclick="applyPresetFilter('all')">
                            <i class="fas fa-list"></i>
                            <span>All Stocks</span>
                        </div>
                    </div>

                    <h3>Query Builder</h3>
                    <div class="query-builder">
                        <textarea id="custom-query" placeholder="Example: MarketCap > 5000 AND PE < 20 AND ROE > 15" rows="4"></textarea>
                        <button class="apply-filter-btn" onclick="applyCustomFilter()">Apply Filter</button>
                    </div>
                </div>

                <div class="screens-main">
                    <div class="results-header">
                        <h3 id="results-title">All Stocks</h3>
                        <span id="results-count">0 companies found</span>
                    </div>

                    <div class="table-container">
                        <table class="stock-table">
                            <thead>
                                <tr>
                                    <th onclick="sortTable('name')">
                                        Company <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('marketCap')">
                                        Market Cap <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('pe')">
                                        P/E <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('roe')">
                                        ROE <i class="fas fa-sort"></i>
                                    </th>
                                    <th onclick="sortTable('price')">
                                        Price <i class="fas fa-sort"></i>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="stock-table-body">
                                <!-- Data populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="pagination">
                        <button id="prev-btn" onclick="previousPage()">
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span id="page-info">Page 1 of 1</span>
                        <button id="next-btn" onclick="nextPage()">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Portfolio Page -->
    <div id="portfolio-page" class="page">
        <div class="container">
            <div class="page-header">
                <h1>Portfolio Tracker</h1>
                <p>Track and analyze your investment portfolio</p>
            </div>
            
            <div class="portfolio-summary">
                <div class="portfolio-card">
                    <h4>Total Value</h4>
                    <p class="portfolio-value">₹12,45,678</p>
                    <span class="portfolio-change positive">+₹23,456 (+1.92%)</span>
                </div>
                <div class="portfolio-card">
                    <h4>Day's Gain/Loss</h4>
                    <p class="portfolio-value">+₹5,234</p>
                    <span class="portfolio-change positive">+0.42%</span>
                </div>
                <div class="portfolio-card">
                    <h4>Total Gain/Loss</h4>
                    <p class="portfolio-value">+₹1,23,456</p>
                    <span class="portfolio-change positive">+10.98%</span>
                </div>
            </div>

            <div class="portfolio-chart-section">
                <h3>Portfolio Performance</h3>
                <div class="chart-container">
                    <canvas id="portfolio-chart"></canvas>
                </div>
            </div>

            <div class="holdings-section">
                <h3>Holdings</h3>
                <div class="table-container">
                    <table class="stock-table">
                        <thead>
                            <tr>
                                <th>Stock</th>
                                <th>Qty</th>
                                <th>Avg Price</th>
                                <th>Current Price</th>
                                <th>P&L</th>
                                <th>Weight</th>
                            </tr>
                        </thead>
                        <tbody id="holdings-data">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- News Page -->
    <div id="news-page" class="page">
        <div class="container">
            <div class="page-header">
                <h1>Market News</h1>
                <p>Latest financial news and market insights</p>
            </div>
            
            <div class="news-grid">
                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Market News">
                    </div>
                    <div class="news-content">
                        <h3>Indian Markets Hit New All-Time High</h3>
                        <p>Sensex crosses 75,000 mark for the first time as banking and IT stocks lead the rally...</p>
                        <div class="news-meta">
                            <span>2 hours ago</span>
                            <span>Market Update</span>
                        </div>
                    </div>
                </div>
                
                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.pexels.com/photos/7567443/pexels-photo-7567443.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Tech News">
                    </div>
                    <div class="news-content">
                        <h3>Tech Giants Report Strong Q4 Earnings</h3>
                        <p>Major technology companies exceed analyst expectations with robust revenue growth...</p>
                        <div class="news-meta">
                            <span>4 hours ago</span>
                            <span>Earnings</span>
                        </div>
                    </div>
                </div>
                
                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.pexels.com/photos/6802049/pexels-photo-6802049.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Banking News">
                    </div>
                    <div class="news-content">
                        <h3>RBI Maintains Repo Rate at 6.5%</h3>
                        <p>Central bank keeps interest rates unchanged citing inflation concerns and growth outlook...</p>
                        <div class="news-meta">
                            <span>6 hours ago</span>
                            <span>Policy</span>
                        </div>
                    </div>
                </div>
                
                <div class="news-card">
                    <div class="news-image">
                        <img src="https://images.pexels.com/photos/6801874/pexels-photo-6801874.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Investment News">
                    </div>
                    <div class="news-content">
                        <h3>Foreign Investors Increase India Allocation</h3>
                        <p>FIIs show renewed interest in Indian equities amid strong economic fundamentals...</p>
                        <div class="news-meta">
                            <span>8 hours ago</span>
                            <span>Investment</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tools Page -->
    <div id="tools-page" class="page">
        <div class="container">
            <div class="page-header">
                <h1>Analysis Tools</h1>
                <p>Advanced tools for financial analysis and research</p>
            </div>
            
            <div class="tools-grid">
                <div class="tool-card">
                    <i class="fas fa-calculator"></i>
                    <h3>Ratio Calculator</h3>
                    <p>Calculate important financial ratios</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-chart-pie"></i>
                    <h3>Portfolio Analyzer</h3>
                    <p>Analyze your investment portfolio</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-search-dollar"></i>
                    <h3>Stock Comparison</h3>
                    <p>Compare multiple stocks side by side</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-chart-area"></i>
                    <h3>Technical Analysis</h3>
                    <p>Advanced charting and technical indicators</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-coins"></i>
                    <h3>Dividend Tracker</h3>
                    <p>Track dividend payments and yields</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-balance-scale"></i>
                    <h3>Risk Assessment</h3>
                    <p>Analyze portfolio risk and volatility</p>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <div id="about-page" class="page">
        <div class="container">
            <div class="page-header">
                <h1>About TrendTracker</h1>
                <p>Your comprehensive stock analysis platform</p>
            </div>
            
            <div class="about-content">
                <div class="about-section">
                    <h3>Our Mission</h3>
                    <p>TrendTracker provides powerful stock screening and analysis tools to help investors make informed decisions. Our platform combines comprehensive financial data with intuitive design to deliver professional-grade analysis capabilities.</p>
                </div>
                
                <div class="about-section">
                    <h3>Key Features</h3>
                    <ul>
                        <li>Advanced stock screening with custom queries</li>
                        <li>Comprehensive financial statement analysis</li>
                        <li>Real-time market data and ratios</li>
                        <li>AI-powered financial assistant</li>
                        <li>Professional-grade data visualization</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Chatbot Widget -->
    <div id="chatbot-widget" class="chatbot-widget">
        <div class="chatbot-header" onclick="toggleChatbot()">
            <i class="fas fa-robot"></i>
            <span>Financial Assistant</span>
            <i class="fas fa-chevron-up chatbot-toggle"></i>
        </div>
        <div class="chatbot-body">
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="message bot-message">
                    <i class="fas fa-robot"></i>
                    <span>Hello! I'm your financial assistant. Ask me about financial ratios, market terms, or investment concepts.</span>
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatbot-input-field" placeholder="Ask about PE ratio, ROE, etc..." onkeypress="handleChatInput(event)">
                <button onclick="sendChatMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>